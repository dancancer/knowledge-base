## 自由拖拽功能

### 功能目标

- 当用户在画布中拖动某一组件时，能实时更新该组件在画布中的位置属性（`top` 和 `left`)

### 实现思路

- 相关事件分析：拖拽行为实际为用户持续按下鼠标左键，并移动鼠标，最后放开鼠标的过程

- 按下鼠标：此时需要记录用户按下鼠标的位置（`startPos`），确认当前鼠标所在的组件（`currentComp`）和 `dom` 元素（`currentDom`），画布监听 `mousedown` 事件，感知拖拽开始

- 鼠标移动： 事件发生时记录当前光标位置（`currentPos`），计算与初始位置的偏移量，根据偏移量更新 `currentDom` 元素的位置信息

- 抬起鼠标：拖拽过程结束，事件发生时记录当前光标位置（`currentPos`），计算与初始位置的偏移量，根据偏移量更新 `currentDom` 元素的位置信息，并更新 `currentComp` 的位置配置属性


## 辅助线功能

### 功能目标

- 当用户在画布中拖动某一组件是，能实时显示相关的辅助线

## 自动吸附功能

### 功能目标

- 当用户在画布中拖动某一组件时，组件的某些关键点位置与相邻的兄弟元素或者父元素的关键点位置相近，则直接吸附到对应位置



### 实现思路

- 关键点梳理：每个组件都有五个关键点，上左 上右 下左 下右 中心点

- 吸附条件：当前拖动组件与所有关键点的x或者y值的差值，当差值小于阈值时，就进行吸附

- 吸附操作详细分析：鼠标移动事件发生时记录当前光标位置（`currentPos`），计算与初始位置的偏移量，根据偏移量计算 `currentDom` 元素的新位置信息，对比相关的关键点坐标，如果 x 或者 y 的差值小于阈值，则将该值改为与对应坐标相应值一致。












